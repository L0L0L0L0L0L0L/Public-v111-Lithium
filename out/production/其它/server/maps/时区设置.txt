搜索：

    public static String ip = "127.0.0.1";
    public static String host = "127.0.0.1";
    public static int channelcount = 2;


替換：

    public static String ip = "127.0.0.1";
    public static String host = "127.0.0.1";
    public static int channelcount = 2;

    public static String TIMEZONE; //時區設定


搜索：

    ip = ServerProperties.getProperty("net.sf.odinms.world.interface");
    host = ServerProperties.getProperty("net.sf.odinms.world.host");
    channelcount = Integer.parseInt(ServerProperties.getProperty("net.sf.odinms.channel.count"));


替換：

    ip = ServerProperties.getProperty("net.sf.odinms.world.interface");
    host = ServerProperties.getProperty("net.sf.odinms.world.host");
    channelcount = Integer.parseInt(ServerProperties.getProperty("net.sf.odinms.channel.count"));

    TIMEZONE = ServerProperties.getProperty("net.sf.odinms.world.TIMEZONE", "GMT+8"); //時區設定



搜索：

        LoginServer.setOn(); //now or later
        QuickMove.QuickMoveLoad();
        System.out.println("楓之谷世界啟動成功：< 花費時間 " + ((System.currentTimeMillis() - startTime) / 1000) + " 秒 >");
        RankingWorker.run();
    }


替換：

        LoginServer.setOn(); //now or later
        QuickMove.QuickMoveLoad();
        TimeZone.setDefault(TimeZone.getTimeZone(TIMEZONE));
        System.out.println("楓之谷世界啟動成功：< 花費時間 " + ((System.currentTimeMillis() - startTime) / 1000) + " 秒 >");
        RankingWorker.run();
    }

頁首添加：

import static constants.ServerConstants.TIMEZONE;

import java.util.TimeZone;




搜索：


public class PacketHelper {

    public final static long FT_UT_OFFSET = 116444592000000000L; // EDT
    public final static long MAX_TIME = 150842304000000000L; //00 80 05 BB 46 E6 17 02
    public final static long ZERO_TIME = 94354848000000000L; //00 40 E0 FD 3B 37 4F 01
    public final static long PERMANENT = 150841440000000000L; // 00 C0 9B 90 7D E5 17 02


替換：

public class PacketHelper {

    public final static long FT_UT_OFFSET = 116444736010800000L + (10000L * TimeZone.getDefault().getOffset(System.currentTimeMillis()));
    public final static long MAX_TIME = 150842304000000000L; //00 80 05 BB 46 E6 17 02
    public final static long ZERO_TIME = 94354848000000000L; //00 40 E0 FD 3B 37 4F 01
    public final static long PERMANENT = 150841440000000000L; // 00 C0 9B 90 7D E5 17 02


頁首添加：

import java.util.TimeZone;



搜索：

    public static void EnterCS(final int playerid, final MapleClient c) {
        CharacterTransfer transfer = CashShopServer.getPlayerStorage().getPendingCharacter(playerid);
        boolean mts = false;
        if (transfer == null) {
            transfer = CashShopServer.getPlayerStorageMTS().getPendingCharacter(playerid);
            mts = true;
            if (transfer == null) {
                c.getSession().close();
                return;
            }
        }
        MapleCharacter chr = MapleCharacter.ReconstructChr(transfer, c, false);

        c.setPlayer(chr);
        c.setAccID(chr.getAccountID());

        if (!c.CheckIPAddress()) { // Remote hack
            c.getSession().close();
            return;
        }

        final int state = c.getLoginState();
        boolean allowLogin = false;
        if (state == MapleClient.LOGIN_SERVER_TRANSITION || state == MapleClient.CHANGE_CHANNEL) {
            if (!World.isCharacterListConnected(c.loadCharacterNames(c.getWorld()))) {
                allowLogin = true;
            }
        }
        if (!allowLogin) {
            c.setPlayer(null);
            c.getSession().close();
            return;
        }


替換：


    public static void EnterCS(final int playerid, final MapleClient c) {
        CharacterTransfer transfer = CashShopServer.getPlayerStorage().getPendingCharacter(playerid);
        boolean mts = false;
        if (transfer == null) {
            transfer = CashShopServer.getPlayerStorageMTS().getPendingCharacter(playerid);
            mts = true;
            if (transfer == null) {
                c.getSession().close();
                return;
            }
        }
        MapleCharacter chr = MapleCharacter.ReconstructChr(transfer, c, false);

        c.setPlayer(chr);
        c.setAccID(chr.getAccountID());

        if (!c.CheckIPAddress()) { // Remote hack
            c.getSession().close();
            return;
        }

        final int state = c.getLoginState();
        boolean allowLogin = false;
        if (state == MapleClient.LOGIN_SERVER_TRANSITION || state == MapleClient.CHANGE_CHANNEL) {
            if (!World.isCharacterListConnected(c.loadCharacterNames(c.getWorld()))) {
                allowLogin = true;
            }
        }
     //   if (!allowLogin) {//注釋掉商城不必要的檢查
     //       c.setPlayer(null);
     //       c.getSession().close();
     //       return;
     //   }
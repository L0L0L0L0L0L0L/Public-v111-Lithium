MapleServerHandler.java



添加：


private final static Map<Short, RecvPacketOpcode> opcodes = new HashMap<Short, RecvPacketOpcode>(); 








    public static void initialize() {
        for (RecvPacketOpcode recv : RecvPacketOpcode.values()) {
            if (opcodes.get(recv.getValue()) != null) {
                System.out.println(recv.toString() + " will not work.");
            } else {
                opcodes.put(recv.getValue(), recv);
            }
        }
    } 










查找

for (final RecvPacketOpcode recv : RecvPacketOpcode.values()) {





       RecvPacketOpcode recv = opcodes.get(header_num); {
            if (opcodes != null) {
            try {
                //handle the packet
            } catch (Exception exception) {
                //handle exception
            }
        } else {
            //record unhandled packet
        } 




MapleServerHandler.initialize();



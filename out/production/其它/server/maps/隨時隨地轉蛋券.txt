recvops包頭

搜索：
# 鍛造技能
ITEM_MAKER = 0x999

# 使用重生(永恆)迷之蛋 道具ID: 4280000
USE_TREASUER_CHEST = 0xC1



替換：

# 鍛造技能
ITEM_MAKER = 0x999

# 使用重生(永恆)迷之蛋 道具ID: 4280000
USE_TREASUER_CHEST = 0xC1

# 遠端使用轉蛋券
USE_REMOTE = 0xC2


源碼部分

搜索：

    USE_CASH_ITEM,
    USE_CATCH_ITEM,


替換：

    USE_CASH_ITEM,
    USE_CATCH_ITEM,
    USE_REMOTE,


搜索：

            case USE_CATCH_ITEM:
                InventoryHandler.UseCatchItem(slea, c, c.getPlayer());
                break;

替換：

            case USE_CATCH_ITEM:
                InventoryHandler.UseCatchItem(slea, c, c.getPlayer());
                break;
            case USE_REMOTE:
                CashShopOperation.UseGachapon(slea, c);
                break;


搜索：

    public static final void doCSPackets(MapleClient c) {
        c.getSession().write(MTSCSPacket.getCSInventory(c));
        c.getSession().write(MTSCSPacket.showNXMapleTokens(c.getPlayer()));
        c.getSession().write(MTSCSPacket.enableCSUse());
        c.getPlayer().getCashInventory().checkExpire(c);
    }
}


替換：

    public static final void doCSPackets(MapleClient c) {
        c.getSession().write(MTSCSPacket.getCSInventory(c));
        c.getSession().write(MTSCSPacket.showNXMapleTokens(c.getPlayer()));
        c.getSession().write(MTSCSPacket.enableCSUse());
        c.getPlayer().getCashInventory().checkExpire(c);
    }

    public static final void UseGachapon(final LittleEndianAccessor slea, MapleClient c){ 
        int type = slea.readInt();
        if (c.getPlayer().getInventory(GameConstants.getInventoryType(type)).countById(type) < 1) {
            return;
        }
        int mode = slea.readInt();
        if (type == 5451000) {
            int npcId = 9100100;
            if (mode != 8 && mode != 9) {
                npcId += mode;
            } else {
                npcId = mode == 8 ? 9100109 : 9100117;
            }
            NPCScriptManager.getInstance().start(c, npcId);
        }
    }
}

頁首添加：

import scripting.NPCScriptManager;